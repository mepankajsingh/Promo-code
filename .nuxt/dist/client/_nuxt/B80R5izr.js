import{_ as T,a as j,u as F}from"./FvKg9nEc.js";import{_ as P}from"./CB8C2eo_.js";import{_ as U}from"./B0bw49uf.js";import{f as _,u as I,a as q,c as l,b as e,t as a,k as D,x as w,i as k,d as E,p as S,j as o,l as G,m as R,F as $,r as C,e as z,o as i}from"./BVDDBvT3.js";import{u as A}from"./D4ohb7b9.js";import"./BeQgeaJJ.js";const L={class:"min-h-screen bg-white"},W={class:"max-w-2xl mx-auto px-4 py-12"},H={class:"text-center mb-8"},Y={class:"text-3xl font-bold text-gray-900 mb-2"},J={class:"text-gray-600 mb-4"},K={class:"inline-flex items-center bg-blue-50 px-4 py-2 rounded-lg"},O={class:"text-gray-600"},Q={class:"bg-gray-50 p-6 mb-6"},X={class:"block text-sm font-medium text-gray-700 mb-1"},Z=["placeholder"],ee={key:0,class:"bg-white border border-gray-200 p-4 text-center"},te={key:1,class:"bg-white border border-gray-200 p-4 text-center"},oe={class:"text-sm font-medium text-gray-700 mb-2"},se={class:"text-sm text-gray-700"},re={key:2,class:"mt-4 bg-white border border-blue-200 p-4"},ae={class:"space-y-3"},ie={key:3,class:"mt-4 bg-white border border-blue-200 p-4"},le={class:"space-y-3"},ne=["onClick"],de=["disabled"],ce={key:0},me={key:1},ue={class:"text-sm text-gray-600 bg-yellow-50 border border-yellow-200 p-3 rounded-lg text-center"},pe={class:"mt-12 space-y-8"},ge={class:"bg-white border border-gray-200 p-6"},ye={class:"text-xl font-semibold text-gray-900 mb-6"},be={class:"space-y-4"},_e={class:"text-sm font-medium text-gray-900"},fe={class:"text-sm text-gray-600"},Be={__name:"starter",setup(he){const p=A(),f=_(""),h=_(""),u=_([]),g=_(!1),{t:V}=I(),y=_(""),n=_({show:!1,message:"",type:"error"});async function B(s){try{await navigator.clipboard.writeText(s),v("Code copied to clipboard!","success")}catch{v("Failed to copy code","error")}}const M={email:{},meetings:{},storage:{}};q({title:"Google Workspace Business Starter Promo Code - 10% Discount",meta:[{name:"description",content:"Get your exclusive 10% discount promo code for Google Workspace Business Starter plan."}]});function v(s,t="error"){n.value={show:!0,message:t==="success"?V("common.successMessage"):s,type:t},setTimeout(()=>{n.value.show=!1},5e3)}async function N(){if(!y.value)return;g.value=!0;let s=null;n.value.show=!1;try{const t=await F(),{data:c,error:b}=await p.from("user_claims").select("promo_code_id").eq("ip_address",t);if(b)throw b;if(c&&c.length>0){const{data:r}=await p.from("promo_codes").select("code").in("id",c.map(d=>d.promo_code_id));if(r&&(u.value=r.map(d=>d.code),c.length>=3)){v(`You have already claimed the maximum of 3 promo codes: ${u.value.join(", ")}`,"warning"),g.value=!1;return}}const{data:m,error:x}=await p.from("promo_codes").select("id, code").match({type:"starter",region:y.value,is_claimed:!1}).filter("id","not.in",`(${(c==null?void 0:c.map(r=>r.promo_code_id).join(","))||""})`).limit(1).single();if(x)throw x;if(m){s=m.id;const{error:r}=await p.from("promo_codes").update({is_claimed:!0}).eq("id",m.id);if(r)throw r;const{error:d}=await p.from("user_claims").insert([{promo_code_id:m.id,type:"starter",region:y.value,ip_address:t}]);if(d)throw d;h.value=m.code,u.value=[...u.value,m.code],f.value&&p.from("business_emails").insert([{email:f.value}]).then(),v("Successfully retrieved your promo code!","success")}else throw new Error("No available promo codes")}catch(t){console.error("Error:",t),s&&await p.from("promo_codes").update({is_claimed:!1}).eq("id",s),h.value="",v(t.message||"Failed to get promo code. Please try again.")}finally{g.value=!1}}return(s,t)=>{const c=T,b=P,m=U,x=j;return i(),l("div",L,[e("div",W,[e("div",H,[e("h1",Y,a(s.$t("starter.title")),1),e("p",J,a(s.$t("starter.subtitle")),1),e("div",K,[e("span",O,"$7"+a(s.$t("common.pricing.perUser")),1)])]),e("div",Q,[e("form",{onSubmit:D(N,["prevent"]),class:"space-y-6"},[w(c,{modelValue:o(y),"onUpdate:modelValue":t[0]||(t[0]=r=>S(y)?y.value=r:null)},null,8,["modelValue"]),e("div",null,[e("label",X,a(s.$t("common.businessEmail")),1),G(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>S(f)?f.value=r:null),type:"email",class:"w-full px-3 py-2 border border-gray-300 text-sm",placeholder:s.$t("common.emailAddresses.placeholder",{email:"your@business.com"})},null,8,Z),[[R,o(f)]])]),o(g)?(i(),l("div",ee,[w(b,{type:"text",class:"mb-4"}),t[3]||(t[3]=e("div",{class:"h-12 bg-gray-200 rounded mb-4"},null,-1)),w(b,{type:"text"})])):o(h)?(i(),l("div",te,[o(n).show&&o(n).type==="success"?(i(),E(m,{key:0,message:o(n).message,type:o(n).type,class:"mb-4"},null,8,["message","type"])):k("",!0),e("h3",oe,a(s.$t("common.promoCodeTitle")),1),e("div",{class:"text-2xl font-mono bg-gray-50 p-3 border border-gray-100 mb-2 text-green-600 cursor-pointer hover:bg-gray-100 transition-colors",onClick:t[2]||(t[2]=r=>B(o(h))),title:"Click to copy"},a(o(h)),1),e("p",se,a(s.$t("common.useCodeMessage")),1)])):k("",!0),o(g)&&o(u).length>0?(i(),l("div",re,[w(b,{type:"text",class:"mb-4"}),e("div",ae,[(i(!0),l($,null,C(o(u).length,r=>(i(),l("div",{key:r,class:"h-12 bg-gray-200 rounded"}))),128))])])):o(u).length>0?(i(),l("div",ie,[t[4]||(t[4]=e("h3",{class:"text-sm font-medium text-gray-700 mb-4 text-center"},"Previously Claimed Codes",-1)),e("div",le,[(i(!0),l($,null,C(o(u),r=>(i(),l("div",{key:r,class:"font-mono bg-gray-50 p-3 border border-gray-100 text-center text-green-600 cursor-pointer hover:bg-gray-100 transition-colors",onClick:d=>B(r),title:"Click to copy"},a(r),9,ne))),128))])])):k("",!0),o(n).show&&o(n).type!=="success"?(i(),E(m,{key:4,message:o(n).message,type:o(n).type},null,8,["message","type"])):k("",!0),e("button",{type:"submit",class:"w-full bg-blue-600 text-white px-4 py-2 text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o(g)||!o(y)},[o(g)?(i(),l("span",ce,a(s.$t("common.processing")),1)):(i(),l("span",me,a(s.$t("common.getPromoCode")),1))],8,de),e("div",ue,[t[5]||(t[5]=e("svg",{class:"h-5 w-5 text-yellow-600 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),z(" "+a(s.$t("common.limitedAvailability")),1)])],32)]),e("div",pe,[e("div",ge,[e("h2",ye,a(s.$t("starter.features.title")),1),e("div",be,[(i(),l($,null,C(M,(r,d)=>e("div",{key:d,class:"flex items-start"},[t[6]||(t[6]=e("svg",{class:"h-5 w-5 text-blue-600 mt-1 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[e("h3",_e,a(s.$t(`starter.features.${d}.title`)),1),e("p",fe,a(s.$t(`starter.features.${d}.description`)),1)])])),64))])]),w(x)])])])}}};export{Be as default};
