{"version":3,"file":"admin-CAP6StVI.js","sources":["../../../../middleware/admin.ts"],"sourcesContent":["import { useSupabaseClient } from '#imports'\n\nexport default defineNuxtRouteMiddleware(async (to) => {\n  // Skip middleware if not on admin pages\n  if (!to.path.startsWith('/admin')) {\n    return\n  }\n\n  const supabase = useSupabaseClient()\n  const user = useSupabaseUser()\n\n  // Redirect to login if no user\n  if (!user.value) {\n    return navigateTo('/login')\n  }\n\n  try {\n    const { data: adminUser, error } = await supabase\n      .from('admin_users')\n      .select()\n      .eq('user_id', user.value.id)\n      .single()\n\n    if (error || !adminUser) {\n      return navigateTo('/login')\n    }\n  } catch (error) {\n    console.error('Error checking admin status:', error)\n    return navigateTo('/login')\n  }\n})\n"],"names":["__executeAsync"],"mappings":";;;;;;;;;;;;;;;;;;;;AAIE,MAAa,QAAA,0BAAsB,OAAA,OAAA;AAAA,MAAA,QAAA;AACjC,MAAA,CAAA,GAAA,KAAA,WAAA,QAAA,GAAA;AACF;AAAA,EAEA;AACA,QAAM,WAAuB,kBAAA;AAGzB,eAAa,gBAAA;AACf,MAAA,CAAA;AACF,WAAA,WAAA,QAAA;AAAA,EAEA;AACE,MAAA;AAMI,UAAA,EAAA,MAAU,WAAW,MAAA,KAAA,CAAA,QAAA,SAAA,IAAAA,aAAA,MAAA,SAAA,KAAA,aAAA,EAAA,OAAA,EAAA,GAAA,WAAA,KAAA,MAAA,EAAA,EAAA,OAAA,CAAA,GAAA,SAAA,MAAA,QAAA,UAAA,GAAA;AACvB,QAAA,qBAA0B;AAC5B,aAAA,WAAA,QAAA;AAAA,IAAA;AAAA,EAEQ,SAAA,OAAM;AACd,kDAA0B,KAAA;AAC5B,WAAA,WAAA,QAAA;AAAA,EACF;;"}